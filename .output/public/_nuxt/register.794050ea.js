import{c as T,a as h,b as R,_ as L}from"./object.5d43951f.js";import{_ as O}from"./VSelect.1c4ae724.js";import{h as V,i as x,r as g,j as B,v as q,o as n,c as I,m as F,u as c,e as d,k as e,F as M,x as Y,t as y,y as $,l as r,f as U,E as A,G as z,H as C,q as D,p as G,I as J,s as j,J as H,w as S,K,L as X}from"./entry.2e476155.js";import"./useTranslate.8819d20e.js";const Q={key:0,class:"error-messages mb-3"},W={class:"alert alert-danger text-center"},Z={class:"list-unstyled mb-0"},ee={class:"row"},se={class:"col-12"},oe={class:"col-sm-6"},ae={class:"col-sm-6"},te={class:"col-sm-6"},re={class:"col-sm-6"},le={class:"col-6"},ne={class:"col-sm-6"},ie={class:"col-md-12 form-group"},ce=["disabled"],de={key:0},ue={key:1},me={__name:"ClientRegister",props:["countries"],setup(v){const{$awn:l}=V(),{apiBase:u,api:_}=x(),t=g(!1),i=g(!1),m=g(""),E=async(o,f)=>{console.log("values",o),o.fullNameAr=o.fullNameEn,o.Phone=o.mobile,t.value=!0;const{data:s,error:p}=await A(_.PersonClientsApi,{baseURL:u,method:"POST",body:o,headers:{Authorization:`Bearer ${z().value}`}},"$fc8wUsXCBh");if(console.log("register success ",s.value,p.value),s.value)if(s.value.hasErrors)t.value=!1,i.value=!0,m.value=s.value.validationErrors,s.value.validationErrors[0].field=="Email"&&(f.evt.target[3].classList.remove("is-valid"),f.evt.target[3].classList.add("is-invalid"));else{i.value=!1;const b={email:o.email,password:o.password};localStorage.setItem("userInfo",JSON.stringify(s.value.result)),C().value=s.value.result;const{data:a,error:P}=await A(`${_.AuthLoginApi}`,{baseURL:u,method:"POST",body:b},"$NBTMtt98Bk");if(console.log("Login after register",a.value,a.value.errors),a.value)if(a.value.errors)t.value=!1,i.value=!0,m.value=a.value.errors,l.alert("There is an error has been occur, please try to login with the same information",{durations:{global:5e3}}),localStorage.removeItem("userInfo"),C().value=null;else return i.value=!1,l.success("Your request has been successfully registered",{durations:{global:5e3}}),localStorage.setItem("token",a.value.token),D().value.isAuthenticated=!0,G().value=a.value.token,localStorage.setItem("accountType",a.value.type),J().value=a.value.type,j("/")}p.value&&(t.value=!1,console.log(p.value))};B({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0});const k=T({fullNameEn:h().required().min(3).label("Your Name"),mobile:h().required().min(3).label("Your Phone Number"),email:h().required().email().label("Email Address"),password:h().required().min(6).label("Your Password"),confirmPassword:h().required().oneOf([R("password")],"Passwords do not match").label("Your Confirmation Password")}),w={fullNameEn:"",mobile:"",countryId:"",addressEn:"",email:"",password:"",confirmPassword:""};return(o,f)=>{const s=L,p=O,b=q("VForm");return n(),I(b,{id:"registerForm",class:"row register_form p-3","validation-schema":c(k),"initial-values":w,onSubmit:E},{default:F(({meta:a})=>[c(i)?(n(),d("div",Q,[e("div",W,[e("ul",Z,[(n(!0),d(M,null,Y(c(m),(P,N)=>(n(),d("li",{key:N},y(P.errors[0]),1))),128))])])])):$("",!0),e("div",ee,[e("div",se,[r(s,{type:"text",name:"fullNameEn",id:"fullNameEn",label:"Name",placeholder:"Name",astricts:"true"})]),e("div",oe,[r(s,{type:"text",name:"mobile",id:"mobile",label:"PhoneNumber",placeholder:"PhoneNumber",astricts:"true"})]),e("div",ae,[r(s,{type:"email",name:"email",id:"email",label:"Email",placeholder:"Email",astricts:"true"})]),e("div",te,[r(s,{type:"password",name:"password",id:"password",label:"Password",placeholder:"Password",autocomplete:"false",activePasswordEye:!0,astricts:"true"})]),e("div",re,[r(s,{type:"password",name:"confirmPassword",id:"confirmPassword",label:"Confirmed Password",placeholder:"Confirmed Password",autocomplete:"false",activePasswordEye:!0,astricts:"true"})]),e("div",le,[r(p,{name:"countryId",id:"countryId",items:v.countries,placeholder:o.$t("select-countries")},null,8,["items","placeholder"])]),e("div",ne,[r(s,{type:"text",name:"addressEn",id:"addressEn",label:"Address",placeholder:"Address"})])]),e("div",ie,[e("button",{type:"submit",value:"Login",class:U(["btn btn-custom btn-block px-3",{"btn-primary":a.valid}]),disabled:!a.valid||c(t)},[c(t)?(n(),d("span",ue,y(o.$t("loading...")),1)):(n(),d("span",de,y(o.$t("sign-up")),1))],10,ce)])]),_:1},8,["validation-schema"])}}};const pe={key:0,class:"error-messages mb-3"},_e={class:"alert alert-danger text-center"},he={class:"list-unstyled mb-0"},ve={class:"row"},fe={class:"col-12"},be={class:"col-sm-6"},ge={class:"col-sm-6"},ye={class:"col-sm-6"},we={class:"col-sm-6"},Pe={class:"col-sm-6"},$e={class:"col-sm-6"},Ee={class:"col-6"},ke={class:"col-sm-6"},Ae={class:"col-md-12 form-group"},Ce=["disabled"],Ne={key:0},xe={key:1},Ie={__name:"CompanyRegister",props:["countries"],setup(v){const{$awn:l}=V(),{apiBase:u,api:_}=x(),t=g(!1),i=g(!1),m=g(""),E=async(o,f)=>{console.log("values",o),t.value=!0,o.nameAr=o.nameEn,o.responsiblePersonNameAr=o.responsiblePersonNameEn,o.addressAr=o.addressEn;const{data:s,error:p}=await A(_.CompanyClientsApi,{baseURL:u,method:"POST",body:o,headers:{Authorization:`Bearer ${z().value}`}},"$7l7JAYnDws");if(console.log("register success ",s.value,p.value),s.value)if(s.value.hasErrors)t.value=!1,i.value=!0,m.value=s.value.validationErrors,s.value.validationErrors[0].field=="Email"&&(f.evt.target[5].classList.remove("is-valid"),f.evt.target[5].classList.add("is-invalid"));else{i.value=!1;const b={email:o.email,password:o.password};localStorage.setItem("userInfo",JSON.stringify(s.value.result)),C().value=s.value.result;const{data:a,error:P}=await A(`${_.AuthLoginApi}`,{baseURL:u,method:"POST",body:b},"$MTl8P3IBC2");if(console.log("Login after register",a.value,a.value.errors),a.value)if(a.value.errors)t.value=!1,i.value=!0,m.value=a.value.errors,l.alert("There is an error has been occur, please try to login with the same information",{durations:{global:5e3}}),localStorage.removeItem("userInfo"),C().value=null;else return i.value=!1,l.success("Your request has been successfully registered",{durations:{global:5e3}}),localStorage.setItem("token",a.value.token),D().value.isAuthenticated=!0,G().value=a.value.token,localStorage.setItem("accountType",a.value.type),J().value=a.value.type,j("/")}p.value&&(t.value=!1,console.log(p.value))};B({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0});const k=T({nameEn:h().required().min(3).label("Your Name"),officePhone:h().required().min(3).label("Your phone"),email:h().required().email().label("Email Address"),password:h().required().min(6).label("Your Password"),confirmPassword:h().required().oneOf([R("password")],"Passwords do not match").label("Your Confirmation Password")}),w={nameEn:"",responsiblePersonNameEn:"",responsiblePersonMobile:"",countryId:"",addressEn:"",officePhone:"",email:"",password:"",confirmPassword:""};return(o,f)=>{const s=L,p=O,b=q("VForm");return n(),I(b,{id:"registerForm",class:"row register_form p-3","validation-schema":c(k),"initial-values":w,onSubmit:E},{default:F(({meta:a})=>[c(i)?(n(),d("div",pe,[e("div",_e,[e("ul",he,[(n(!0),d(M,null,Y(c(m),(P,N)=>(n(),d("li",{key:N},y(P.errors[0]),1))),128))])])])):$("",!0),e("div",ve,[e("div",fe,[r(s,{type:"text",name:"nameEn",id:"nameEn",label:"Company Name",placeholder:"Company Name",astricts:"true"})]),e("div",be,[r(s,{type:"email",name:"email",id:"email",label:"Email",placeholder:"Email",astricts:"true"})]),e("div",ge,[r(s,{type:"number",name:"officePhone",id:"officePhone",label:"phone",placeholder:"phone",astricts:"true"})]),e("div",ye,[r(s,{type:"password",name:"password",id:"password",label:"Password",placeholder:"Password",autocomplete:"false",activePasswordEye:!0,astricts:"true"})]),e("div",we,[r(s,{type:"password",name:"confirmPassword",id:"confirmPassword",label:"Confirmed Password",placeholder:"Confirmed Password",autocomplete:"false",activePasswordEye:!0,astricts:"true"})]),e("div",Pe,[r(s,{type:"text",name:"responsiblePersonNameEn",id:"responsiblePersonNameEn",label:"Responsible Person Name",placeholder:"Responsible Person Name"})]),e("div",$e,[r(s,{type:"number",name:"responsiblePersonMobile",id:"responsiblePersonMobile",label:"Responsible Person Mobile",placeholder:"Responsible Person Mobile"})]),e("div",Ee,[r(p,{name:"countryId",id:"countryId",items:v.countries,placeholder:o.$t("select-countries")},null,8,["items","placeholder"])]),e("div",ke,[r(s,{type:"text",name:"addressEn",id:"addressEn",label:"Address",placeholder:"Address"})])]),e("div",Ae,[e("button",{type:"submit",value:"Login",class:U(["btn btn-custom btn-block px-3",{"btn-primary":a.valid}]),disabled:!a.valid||c(t)},[c(t)?(n(),d("span",xe,y(o.$t("loading...")),1)):(n(),d("span",Ne,y(o.$t("sign-up")),1))],10,Ce)])]),_:1},8,["validation-schema"])}}};const Se={class:"main-black-background"},Te={class:"col-lg-8 login_box_area mx-auto"},Re={class:"container"},Le={class:"row"},Oe=e("div",{class:"col-lg-6 d-none"},null,-1),Ve={class:"col-md-10 col-xl-8 mx-auto"},Be={class:"register_form_inner"},qe=e("h3",{class:"mb-3 font-philosopher"},"Singup to enter",-1),Fe={class:"radio-group"},Me={class:"form-check form-switch form-check-inline"},Ye=e("label",{for:"person",class:"form-check-label bright-white"},"Person",-1),Ue={class:"form-check form-switch form-check-inline"},ze=e("label",{for:"company",class:"form-check-label bright-white"},"Company",-1),De={key:0},Ge={key:1},Je={__name:"Register",props:["countries"],setup(v){const l=g(!0),u=_=>{l.value=_.target.value=="person"};return H(()=>{l.value=!0}),(_,t)=>{const i=me,m=Ie;return n(),d("main",Se,[e("section",Te,[e("div",Re,[e("div",Le,[Oe,e("div",Ve,[e("div",Be,[qe,e("div",Fe,[e("div",Me,[e("input",{type:"radio",class:"form-check-input",id:"person",name:"accountType",value:"person",onChange:u,checked:""},null,32),Ye]),e("div",Ue,[e("input",{type:"radio",class:"form-check-input",id:"company",name:"accountType",value:"company",onChange:u},null,32),ze])]),c(l)?(n(),d("div",De,[r(i,{countries:v.countries},null,8,["countries"])])):$("",!0),c(l)?$("",!0):(n(),d("div",Ge,[r(m,{countries:v.countries},null,8,["countries"])]))])])])])])])}}},Qe={__name:"register",async setup(v){let l,u;const{api:_}=x(),{data:t,error:i,execute:m}=([l,u]=S(()=>K().GetAll(_.CountriesGetAllApi)),l=await l,u(),l);return i.value&&i.value.statusCode==401&&([l,u]=S(()=>X().reAuthorize()),await l,u()),H(()=>{t.value||m()}),(E,k)=>{const w=Je;return n(),d("main",null,[c(t)?(n(),I(w,{key:0,countries:c(t)},null,8,["countries"])):$("",!0)])}}};export{Qe as default};
