import{c as V,a as v,_ as A}from"./object.5d43951f.js";import{h as C,i as F,r as m,j as N,o as t,e as o,k as a,t as i,l as c,m as h,u as r,p as T,q as B,s as E,v as O,F as S,x as q,y as I,f as P,z,A as R}from"./entry.2e476155.js";const U={class:"main-black-background"},j={class:"col-lg-8 login_box_area mx-auto"},D={class:"container"},M={class:"row"},Y={class:"col-md-10 col-lg-8 col-xl-6 mx-auto"},G={class:"login_form_inner"},H={class:"mb-3 font-philosopher"},J={key:0,class:"error-messages mb-3"},K={class:"alert alert-danger text-center"},Q={class:"list-unstyled mb-0"},W={class:"col-md-12 form-group"},X=["disabled"],Z={key:0},ee={key:1},oe={__name:"login",setup(ae){const{$awn:g}=C(),{apiBase:b,api:f}=F(),l=m(!1),u=m(!1),_=m(""),y=async(e,n)=>{l.value=!0;const{data:s,error:d}=await $fetch(`${f.AuthLoginApi}`,{baseURL:b,method:"POST",body:e});if(s.token)if(s.errors)l.value=!1,u.value=!0,_.value=s.errors,n.evt.target[0].classList.remove("is-valid"),n.evt.target[0].classList.add("is-invalid"),n.evt.target[1].classList.remove("is-valid"),n.evt.target[1].classList.add("is-invalid");else return u.value=!1,localStorage.setItem("token",s.token),T().value=s.token,B().value.isAuthenticated=!0,E("/");d.value&&(console.log(d.value),l.value=!1,g.alert("There is an error has been occur, please try again",{durations:{global:5e3}}))};N({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0});const k=V({email:v().required().email().label("Email Address"),password:v().required().min(6).label("Your Password")}),w={email:"",password:""};return(e,n)=>{const s=A,d=R,$=O("VForm");return t(),o("main",U,[a("section",j,[a("div",D,[a("div",M,[a("div",Y,[a("div",G,[a("h3",H,i(e.$t("login-to-enter")),1),c($,{id:"loginForm",class:"row login_form","validation-schema":r(k),"initial-values":w,onSubmit:y},{default:h(({meta:p})=>[r(u)?(t(),o("div",J,[a("div",K,[a("ul",Q,[(t(!0),o(S,null,q(r(_),(x,L)=>(t(),o("li",{key:L},i(x),1))),128))])])])):I("",!0),c(s,{type:"email",name:"email",id:"email",label:e.$t("email"),placeholder:e.$t("email")},null,8,["label","placeholder"]),c(s,{type:"password",name:"password",id:"password",label:e.$t("password"),placeholder:e.$t("password"),autocomplete:"false",activePasswordEye:!0},null,8,["label","placeholder"]),a("div",W,[a("button",{type:"submit",value:"Login",class:P(["btn btn-main btn-block px-3",{"btn-primary":p.valid}]),disabled:!p.valid||r(l)},[r(l)?(t(),o("span",ee,i(e.$t("loading...")),1)):(t(),o("span",Z,i(e.$t("login")),1))],10,X),c(d,{to:"/",class:"text-white"},{default:h(()=>[z(i(e.$t("forgot-password")),1)]),_:1})])]),_:1},8,["validation-schema"])])])])])])])}}};export{oe as default};
